# Starter pipeline
# This pipeline triggers on 'machine-learning' or 'web_developer' branches
# and automatically pushes to the 'main' branch.

trigger:
- machine-learning
- web_developer

pool:
  vmImage: ubuntu-latest

steps:
- script: echo "Hello, world!"
  displayName: 'Run a one-line script'

- script: |
    echo "Add other tasks to build, test, and deploy your project."
    echo "See https://aka.ms/yaml"
  displayName: 'Run a multi-line script'

- script: |
    # Configure git user (needed for push)
    git config --global user.email "aliffaturrohman11@gmail.com"
    git config --global user.name "Alif Faturrohman"
    
    # Checkout main branch and merge changes
    git checkout main
    git merge --no-ff $(Build.SourceBranchName) -m "Merge changes from $(Build.SourceBranchName)"
    
    # Push changes to main branch
    git push origin main
  displayName: 'Push changes to main branch'
